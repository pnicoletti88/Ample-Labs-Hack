(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,a){e.exports={main:"Loader_main__nRsmE"}},112:function(e,t,a){e.exports={main:"HeatMapPage_main__1hDRO"}},114:function(e,t,a){e.exports=a.p+"static/media/clothing.ee713939.svg"},115:function(e,t,a){e.exports=a.p+"static/media/dropIn.ced1ebf0.svg"},116:function(e,t,a){e.exports=a.p+"static/media/emergency.c0adc641.svg"},117:function(e,t,a){e.exports=a.p+"static/media/freeMeal.9bb213d2.svg"},118:function(e,t,a){e.exports={main:"HeatMap_main__2gd7-"}},119:function(e,t,a){e.exports={main:"SideBar_main__2As-D"}},120:function(e,t,a){e.exports={main:"DropDown_main__27EnP"}},121:function(e,t,a){e.exports={indicator:"IndicatorsContainer_indicator__t2Es8"}},132:function(e,t,a){e.exports=a(227)},226:function(e,t,a){},227:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),o=a.n(l),i=a(23),s=a(24),c=a(27),u=a(25),p=a(28),m=a(111),d=a.n(m),f=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onLoad=function(){a.state.loading&&a.setState({loading:!1})},a.state={loading:!0},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.render,t=this.state.loading;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("div",{className:d.a.main},"Page Loading!"),e({onLoad:this.onLoad}))}}]),t}(n.Component),g=a(44),h=a.n(g),y=a(54),v=a(112),D=a.n(v),_=a(113),b=a.n(_),E=a(11),C=a.n(E),T=a(114),S=a.n(T),x=a(115),O=a.n(x),w=a(116),j=a.n(w),N=a(117),V=a.n(N),k=a(78),L=a.n(k),P={key:"AIzaSyAEWRdFiazkHE7FPHTNKXhXb1POsr9hZ7Y"},B="login",I="food",F="shelter",M="emerg",A="dropIn",z="clothing",H=new Date;H.setDate(H.getDate()-30);var R={startDate:C()().subtract(30,"days"),endDate:C()()},W=B,Z=[{value:B,label:"Login",imageSrc:L.a},{value:I,label:"Free Meal",imageSrc:V.a},{value:F,label:"Shelter",imageSrc:L.a},{value:M,label:"Emergency",imageSrc:j.a},{value:A,label:"Drop In",imageSrc:O.a},{value:z,label:"Clothing",imageSrc:S.a}],G=a(118),J=a.n(G),K={styles:[{featureType:"all",elementType:"labels",stylers:[{visibility:"off"},{color:"#f49f53"}]},{featureType:"administrative.locality",elementType:"all",stylers:[{visibility:"on"},{weight:"0.01"},{color:"#637381"}]},{featureType:"administrative.neighborhood",elementType:"all",stylers:[{color:"#637381"},{visibility:"on"},{weight:"0.01"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#ffffff"},{lightness:-7},{gamma:"10.00"}]},{featureType:"poi",elementType:"all",stylers:[{color:"#ffffff"}]},{featureType:"poi.business",elementType:"all",stylers:[{lightness:38}]},{featureType:"poi.government",elementType:"all",stylers:[{lightness:46}]},{featureType:"poi.medical",elementType:"geometry.fill",stylers:[{lightness:38}]},{featureType:"poi.park",elementType:"all",stylers:[{lightness:39}]},{featureType:"poi.school",elementType:"all",stylers:[{lightness:35}]},{featureType:"poi.sports_complex",elementType:"all",stylers:[{lightness:32}]},{featureType:"road",elementType:"all",stylers:[{lightness:43}]},{featureType:"road.highway",elementType:"all",stylers:[{color:"#dbdde0"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{weight:"0.66"}]},{featureType:"road.arterial",elementType:"all",stylers:[{visibility:"on"},{color:"#dadce0"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{weight:1.3},{lightness:16}]},{featureType:"road.local",elementType:"geometry.stroke",stylers:[{lightness:-10}]},{featureType:"transit",elementType:"all",stylers:[{lightness:38}]},{featureType:"transit.line",elementType:"all",stylers:[{color:"#813033"},{lightness:22},{visibility:"off"}]},{featureType:"transit.station",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#e3e5e9"},{saturation:-69},{gamma:.99},{lightness:43}]}]},X=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.center,n=t.zoom,l=t.data,o=t.onLoad,i={positions:l.map(function(e){return{lng:e.location.long,lat:e.location.lat}}),options:{radius:10,opacity:.5}};return r.a.createElement("div",{className:J.a.main},r.a.createElement(b.a,{ref:function(t){e._googleMap=t},bootstrapURLKeys:P,defaultCenter:a,defaultZoom:n,heatmapLibrary:!0,heatmap:i,options:K,onTilesLoaded:o}))}}]),t}(n.PureComponent);X.defaultProps={center:{lat:43.6532,lng:-79.3832},zoom:12,onLoad:function(){},data:[]};var U=X,Q=(a(61),a(119)),Y=a.n(Q),$=a(79),q=a.n($),ee=function(e){var t=e.title;return r.a.createElement("div",{className:q.a.main},r.a.createElement("h2",{className:q.a.text},t))},te=a(80),ae=a.n(te),ne=function(e){var t=e.title;return r.a.createElement("div",{className:ae.a.main},r.a.createElement("h1",{className:ae.a.text},t))},re=a(59),le=a(53),oe=a(120),ie=a.n(oe),se=function(){return null},ce=a(10),ue=a(121),pe=a.n(ue),me=function(e){return r.a.createElement("div",{className:pe.a.indicator},r.a.createElement(ce.z.IndicatorsContainer,e))},de=a(57),fe=a.n(de),ge=function(e){var t=e.data;return r.a.createElement("div",{className:fe.a.singleValue},r.a.createElement("img",{src:t.imageSrc,className:fe.a.icon,alt:"icon"}),r.a.createElement("span",{className:fe.a.singleValueText},t.label))},he=a(58),ye=a.n(he),ve=function(e){return r.a.createElement("div",{className:"input-select"},r.a.createElement("div",{className:"input-select__single-value"},r.a.createElement("span",{className:"input-select__icon"},r.a.createElement(ce.z.Option,e,r.a.createElement("div",{className:ye.a.singleValue},r.a.createElement("img",{src:e.data.imageSrc,className:ye.a.icon,alt:"icon"}),r.a.createElement("span",{className:ye.a.singleValueText},e.data.label))))))},De={menu:function(e){return Object(re.a)({},e,{border:"1px solid #5E5DFF"})},control:function(e){return Object(re.a)({},e,{border:"1px solid #5E5DFF",boxShadow:"none","&:hover":{border:"1px solid #5E5DFF"}})},option:function(e,t){return Object(re.a)({},e,{fontWeight:t.isSelected?"bold":"normal",backgroundColor:t.isSelected?"none":e.backgroundColor,color:"black"})}},_e=function(e){var t=e.value,a=e.updateValue;return r.a.createElement("div",{className:ie.a.main},r.a.createElement(le.a,{defaultValue:Z.find(function(e){return e.value===t}),options:Z,components:{SingleValue:ge,Option:ve,IndicatorsContainer:me,IndicatorSeparator:se},isSearchable:!1,styles:De,onChange:a}))},be=a(38),Ee=a.n(be),Ce=(a(163),a(131)),Te=a(123),Se=a.n(Te),xe=a(128),Oe=a.n(xe),we=a(129),je=a.n(we),Ne=(a(208),a(209),a(81)),Ve=a.n(Ne),ke=-1!==window.location.search.indexOf("cn"),Le=C()();ke?Le.locale("zh-cn").utcOffset(8):Le.locale("en-gb").utcOffset(0),Le.clone().add(-1,"month");var Pe=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"getCalendarContainer",value:function(){return this.d||document.getElementById("d")}},{key:"render",value:function(){var e=this,t=this.props,a=t.onChange,n=t.dateValue;return r.a.createElement("div",{className:Ve.a.main},r.a.createElement("div",{id:"d",ref:function(t){return e.d=t}}),r.a.createElement("div",null,r.a.createElement(Se.a,{getCalendarContainer:this.getCalendarContainer,calendar:r.a.createElement(Ce.a,{locale:ke?Oe.a:je.a,style:{width:200}}),value:n,onChange:a},function(e){var t=e.value;return r.a.createElement("span",null,r.a.createElement("input",{className:Ve.a.input,readOnly:!0,value:t&&t.format("LL")||""}))})))}}]),t}(r.a.Component),Be=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).applyChangeButton=function(){(0,a.props.updateData)(),a.setState({newDatesPresent:!1})},a.startDateChange=function(e){var t=a.props.onStartDateChange;a.state.newDatesPresent||a.setState({newDatesPresent:!0}),t(e)},a.endDateChange=function(e){var t=a.props.onEndDateChange;a.state.newDatesPresent||a.setState({newDatesPresent:!0}),t(e)},a.state={newDatesPresent:!1},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.startDate,a=e.endDate,n=this.state.newDatesPresent;return r.a.createElement("div",{className:Ee.a.main},r.a.createElement("div",{className:Ee.a.dates},r.a.createElement("div",null,r.a.createElement("p",{className:Ee.a.dateDescriptor},"Start day:"),r.a.createElement(Pe,{dateValue:t,onChange:this.startDateChange})),r.a.createElement("p",{className:Ee.a.text},"to"),r.a.createElement("div",null,r.a.createElement("p",{className:Ee.a.dateDescriptor},"End day:"),r.a.createElement(Pe,{dateValue:a,onChange:this.endDateChange}))),n&&r.a.createElement("button",{className:Ee.a.applyButton,onClick:this.applyChangeButton,type:"button"},"Apply Changes"))}}]),t}(n.Component),Ie=r.a.memo(function(e){var t=e.action,a=e.updateAction,n=e.startDate,l=e.endDate,o=e.onStartDateChange,i=e.onEndDateChange,s=e.updateData;return r.a.createElement("div",{className:Y.a.main},r.a.createElement(ne,{title:"Chalmers Bot User HeatMap"}),r.a.createElement(ee,{title:"Date Settings"}),r.a.createElement(Be,{startDate:n,endDate:l,onEndDateChange:i,onStartDateChange:o,updateData:s}),r.a.createElement(ee,{title:"Services Filter"}),r.a.createElement(_e,{value:t,updateValue:a}))}),Fe=a(130),Me=a.n(Fe),Ae=function(){var e=Object(y.a)(h.a.mark(function e(t,a,n){var r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me.a.get("/api/locationData",{params:{action:t,startDate:a.toDate(),endDate:n.toDate()}});case 2:if("OK"!==(r=e.sent).statusText){e.next=5;break}return e.abrupt("return",r.data);case 5:throw new Error("Server error: location data fetch");case 6:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),ze=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={startDate:R.startDate,endDate:R.endDate,action:W,heatMapPoints:[]},a.componentDidMount=function(){var e=a.state,t=e.startDate,n=e.endDate,r=e.action;a.updateLocationData(r,t,n)},a.updateLocationData=function(){var e=Object(y.a)(h.a.mark(function e(t,n,r){var l;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae(t,n,r);case 2:l=e.sent,a.setState({heatMapPoints:l});case 4:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.updateAction=function(e){var t=e.value,n=a.state,r=n.startDate,l=n.endDate;a.setState({action:t,heatMapPoints:[]}),a.updateLocationData(t,r,l)},a.updateStartDate=function(e){a.setState({startDate:e})},a.updateEndDate=function(e){a.setState({endDate:e})},a.updateDataWithState=function(){var e=a.state,t=e.action,n=e.startDate,r=e.endDate;a.updateLocationData(t,n,r)},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.onLoad,t=this.state,a=t.heatMapPoints,n=t.action,l=t.startDate,o=t.endDate;return r.a.createElement("div",{className:D.a.main},r.a.createElement(Ie,{updateAction:this.updateAction,onStartDateChange:this.updateStartDate,onEndDateChange:this.updateEndDate,action:n,startDate:l,endDate:o,updateData:this.updateDataWithState}),r.a.createElement(U,{data:a,onLoad:e}))}}]),t}(n.PureComponent);ze.defaultProps={onLoad:function(){}};var He=ze,Re=function(e){return r.a.createElement(r.a.Suspense,{fallback:null},r.a.createElement(He,e))},We=function(){return r.a.createElement(f,{Element:He,render:Re})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(226);o.a.render(r.a.createElement(We,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},38:function(e,t,a){e.exports={main:"DateController_main__xRpS1",dates:"DateController_dates__2F4BM",text:"DateController_text__2sexk",dateDescriptor:"DateController_dateDescriptor__CQb1J",applyButton:"DateController_applyButton__1S_Zy"}},57:function(e,t,a){e.exports={icon:"CustomSingleValue_icon__1VwLl",singleValue:"CustomSingleValue_singleValue__csjnz",singleValueIcon:"CustomSingleValue_singleValueIcon__39zra",singleValueText:"CustomSingleValue_singleValueText__3w3AB"}},58:function(e,t,a){e.exports={icon:"CustomOptions_icon__3nw92",singleValue:"CustomOptions_singleValue__eXwa5",singleValueIcon:"CustomOptions_singleValueIcon__HG99I",singleValueText:"CustomOptions_singleValueText__2oLm-"}},78:function(e,t,a){e.exports=a.p+"static/media/shelter.af0d3930.svg"},79:function(e,t,a){e.exports={main:"SideBarSubHeading_main__1RLZG",text:"SideBarSubHeading_text__TyCW5"}},80:function(e,t,a){e.exports={main:"SideBarTitle_main__vcdNj",text:"SideBarTitle_text__2PsFP"}},81:function(e,t,a){e.exports={main:"RangeCalendar_main___LO9G",input:"RangeCalendar_input__781k-"}}},[[132,1,2]]]);
//# sourceMappingURL=main.994ff0bc.chunk.js.map